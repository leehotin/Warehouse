<html>
    <head>
        <title>Warehouse In Out system</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <link href="/css/style.css" rel="stylesheet" type="text/css">
        <script src="/js/darkMode.js"></script>
    </head>

    <body class="darkmode">
        <div class="container">
            <div class="row row_rita">
                <div class="col-2">
                    <div class="list-group list-group-flush text-center">
                        <a href="/" class="list-group-item darkmode">Index</a>
                        <a href="/productlist" class="list-group-item darkmode">Products</a>
                        <a href="/stock" class="list-group-item darkmode">Stocks</a>
                        <a href="/deliveryOrder" class="list-group-item darkmode">Delivery Orders</a>
                        <a href="/user" class="list-group-item darkmode">Users</a>
                        <button type="submit" form="logout" class="list-group-item darkmode">Logout</button>
                        <a href="/recycleBin" class="list-group-item darkmode">Recycle Bin</a>
                        <label class="list-group-item darkmode" onclick="darkMode(this)">Dark Mode</label>
                    </div> 
                    
                    <form action="/user/logout" method="post" id="logout">
                    </form> 
                </div>

                <div class="col-10">
                    <div class="row">
                        <div class="col">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="/" class="darkmode">Home</a></li>
                                <li class="breadcrumb-item"><a href="/deliveryOrder" class="darkmode">DeliveryOrder</a></li>
                                <li class="breadcrumb-item darkmode">Information</li>
                                <li class="breadcrumb-item active darkmode" aria-current="page"><%= data.delivery_id %></li>
                            </ol>
                        </div>
                        <div class="col">
                            <button class="btn btn-warning" form="delete">Delete Order</button>
                            <button class="btn btn-primary" form="update">Update Order</button>
                        </div>
                        <form action="./delete" method="post" id="delete">
                        </form>
                    </div>
                    <div class="row">
                        <form action="./update" method="post" id="update">
                            <div class="row my-1">
                                <div class="col fw-bold ">
                                    <label for="DeliveryID">Delivery ID:</label>
                                </div>
                                <div class="col">
                                    <input type="text" id="DeliveryID" name="delivery_id" value="<%= data.delivery_id %>" class="form-control text">
                                </div>
                            </div>

                            <div class="row my-1">
                                <div class="col fw-bold ">
                                    <label for="Company">Company:</label>
                                </div>
                                <div class="col">
                                    <input type="text" id="Company" name="company" value="<%= data.company %>" class="form-control text">
                                </div>
                            </div>

                            <div class="row my-1">
                                <div class="col fw-bold ">
                                    <label for="Address">Company Address:</label>
                                </div>
                                <div class="col">
                                    <input type="text" id="Address" name="address" value="<%= data.address %>" class="form-control text">
                                </div>
                            </div>

                            <div class="row my-1">
                                <div class="col fw-bold ">
                                    <label for="Phone">Company Phone:</label>
                                </div>
                                <div class="col">
                                    <input type="text" id="Phone" name="phone" value="<%= data.phone %>" class="form-control text">
                                </div>
                            </div>

                            <div class="row my-1">
                                <div class="col fw-bold ">
                                    <label>Delivery Type:</label>
                                </div>
                                <div class="col">
                                    <div class="form-check">
                                        <label class="form-check-label" for="in">In</label>
                                        <input type="radio" value="in" id="in" name="type"  class="form-check-input" <% if(data.type==='in'){ %>checked<% } %>> 
                                    </div>
                                    <div class="form-check">
                                        <label class="form-check-label" for="out">Out</label>
                                        <input type="radio" value="out" id="out" name="type"  class="form-check-input" <% if(data.type==='out'){ %>checked<% } %>>
                                    </div>
                                </div>
                            </div>

                            <div class="row my-1">
                                <label class="fw-bold ">Items：</label>
                                <div class="col">
                                    <% for(i in data.items){ %>
                                        <div class="row py-1 my-1 border-bottom border-primary">
                                            <div class="col">
                                                <label for="item[<%= i %>][name]">Name:</label>
                                                <input type="hidden" name="item[product_id]" value="<%= (data.items[i].product_id) %>">
                                                <input type='text' class="form-control text" name="item[name]" id="item[<%= i %>][name]" value="<%= (data.items[i].name).replace(/\n/g, '') %>" size="50">
                                            </div>
                                            <div class="col">
                                                <label for="item[<%= i %>][count]">Count:</label>
                                                <input type='text' class="form-control text" name="item[count]" id="item[<%= i %>][count]" value="<%= (data.items[i].count) %>" size="10">
                                            </div>
                                            <div class="col">
                                                <label for="item[<%= i %>][completed]">Completed:</label>
                                                <input type='text' class="form-control text" name="item[completed]" id="item[<%= i %>][completed]" value="<%= (data.items[i].completed) %>">
                                            </div>
                                            <div class="col">
                                                <label for="item[<%= i %>][stock_id]">Stock Id:</label>
                                                <input type='text' class="form-control text" name="item[stock_id]" id="item[<%= i %>][stock_id]" value="<%= (data.items[i].stock_id) %>">
                                            </div>
                                        </div>
                                    <% }for(i = 0 ; i < 2 ; i++){ %>
                                        <div class="row py-1 my-1 border-bottom border-primary">
                                            <div class="col">
                                                <label for="up_item[<%= i %>][name]">Name:</label>
                                                <input type='text' class="form-control text" name="up_item[name]" id="up_item[<%= i %>][name]" value="" size="50">
                                            </div>
                                            <div class="col">
                                                <label for="up_item[<%= i %>][count]">Count:</label>
                                                <input type='text' class="form-control text" name="up_item[count]" id="up_item[<%= i %>][count]" value="" size="10">
                                            </div>
                                            <div class="col">
                                                <label for="up_item[<%= i %>][completed]">Completed:</label>
                                                <input type='text' class="form-control text" name="up_item[completed]" id="up_item[<%= i %>][completed]" value="">
                                            </div>
                                            <div class="col">
                                                <label for="up_item[<%= i %>][stock_id]">Stock Id:</label>
                                                <input type='text' class="form-control text" name="up_item[stock_id]" id="up_item[<%= i %>][stock_id]" value="">
                                            </div>
                                        </div>
                                    <% }%>
                                </div>
                            </div>

                            <div class="row my-1">
                                <div class="col fw-bold ">
                                    Delivery Check：
                                </div>
                                <div class="col">
                                    <div class="form-check">
                                        <label class="form-check-label" for="finish">Finish</label>
                                        <input type="radio" value="1" name="delivery_check" id="finish" class="form-check-input" <% if(data.delivery_check===1){ %>checked<% } %>>
                                    </div>
                                    <div class="form-check">
                                        <label class="form-check-label" for="NotFinish">Not Finish</label>
                                        <input type="radio" value="0" name="delivery_check" id="NotFinish" class="form-check-input" <% if(data.delivery_check==='0'){ %>checked<% } %>>
                                    </div>
                                </div>
                                <div class="col fw-bold">
                                    <label for="delivery_user">Delivery User:</label>
                                </div>
                                <div class="col">
                                    <select name="delivery_user" id="delivery_user" class="form-select form-select-sm">
                                        <option>請選擇</option>
                                        <% let j ; for(i of user){ %>
                                        <option value="<%= Object.values(i) %>"<% if(Object.values(i)==data.delivery_user){ j='exsits'; %>selected <% } %>>
                                            <%= Object.values(i) %>
                                        </option>
                                        <% } %><% if(j!='exsits'){ %><option name='delivery_user' value="<%= data.delivery_user %>" selected><%= data.delivery_user %></option> <% } %> 
                                    </select>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

    <script>
        document.addEventListener('load', setDarkMode());
    </script>  
</html>